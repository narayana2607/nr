"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[242],{8242:(e,l,t)=>{t.r(l),t.d(l,{default:()=>r});var a=t(5043),s=t(6213),n=t(6292),i=t(579);const r=()=>{const[e,l]=(0,a.useState)([]),[t,r]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[m,v]=(0,a.useState)("all"),[x,g]=(0,a.useState)(null),[j,f]=(0,a.useState)([]);(0,a.useEffect)((()=>{C()}),[]);const C=()=>{s.A.get("http://localhost:3001/media").then((e=>{l(e.data),r(e.data)})).catch((e=>{console.error("Error fetching media",e)}))},k=(l,t)=>{let a=e.filter((e=>e.original_name&&e.original_name.toLowerCase().includes(l)));"image"===t?a=a.filter((e=>e.url.endsWith(".jpg")||e.url.endsWith(".png"))):"video"===t&&(a=a.filter((e=>e.url.endsWith(".mp4")||e.url.endsWith(".mov")||e.url.endsWith(".avi")))),r(a)},y=e=>{g(e)},b=()=>{g(null)};return(0,i.jsxs)("div",{className:"gallery",children:[(0,i.jsx)("h1",{children:"Media Gallery"}),(0,i.jsxs)("div",{className:"upload-container",children:[(0,i.jsx)("input",{type:"file",multiple:!0,onChange:e=>{c(e.target.files)}}),(0,i.jsx)("button",{onClick:()=>{const e=new FormData;for(let l=0;l<o.length;l++)e.append("media",o[l]);s.A.post("http://localhost:3001/upload",e).then((()=>{alert("Files uploaded successfully"),C()})).catch((e=>{console.error("Error uploading files",e)}))},children:"Upload"})]}),(0,i.jsxs)("div",{className:"filter-container",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search by name...",value:d,onChange:e=>{const l=e.target.value.toLowerCase();u(l),k(l,m)}}),(0,i.jsxs)("select",{value:h,onChange:e=>{const l=e.target.value;p(l);let a=[...t];"name"===l?a=a.sort(((e,l)=>e.original_name.localeCompare(l.original_name))):"date"===l&&(a=a.sort(((e,l)=>new Date(e.uploadDate)-new Date(l.uploadDate)))),r(a)},children:[(0,i.jsx)("option",{value:"",children:"Sort By"}),(0,i.jsx)("option",{value:"name",children:"Name"}),(0,i.jsx)("option",{value:"date",children:"Date"})]}),(0,i.jsxs)("select",{value:m,onChange:e=>{const l=e.target.value;v(l),k(d,l)},children:[(0,i.jsx)("option",{value:"all",children:"All"}),(0,i.jsx)("option",{value:"image",children:"Images"}),(0,i.jsx)("option",{value:"video",children:"Videos"})]}),(0,i.jsx)("button",{onClick:()=>{if(0===j.length)return void alert("No media selected for deletion");const e=j.map((e=>s.A.delete(`http://localhost:3001/media/${e}`)));Promise.all(e).then((()=>{alert("Selected files deleted successfully"),f([]),C()})).catch((e=>{console.error("Error deleting files",e)}))},children:"Delete Selected"})]}),(0,i.jsx)("div",{className:"gallery-items",children:t.map(((e,l)=>{const t=e.url&&(e.url.endsWith(".mp4")||e.url.endsWith(".mov")||e.url.endsWith(".avi"));return(0,i.jsxs)("div",{className:"gallery-item "+(j.includes(e.id)?"selected":""),children:[(0,i.jsx)("div",{className:"checkbox-container",children:(0,i.jsx)("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>{return l=e.id,void f((e=>e.includes(l)?e.filter((e=>e!==l)):[...e,l]));var l}})}),t?(0,i.jsx)("video",{src:e.url,controls:!0,onClick:()=>y(e)}):(0,i.jsx)("img",{src:e.url,alt:`Media item ${l}`,onClick:()=>y(e)}),(0,i.jsx)("button",{className:"delete-button",onClick:()=>{return l=e.id,void s.A.delete(`http://localhost:3001/media/${l}`).then((()=>{alert("File deleted successfully"),C()})).catch((e=>{console.error("Error deleting file",e)}));var l},children:(0,i.jsx)(n.qbC,{})})]},l)}))}),x&&(0,i.jsx)("div",{className:"preview-overlay",onClick:b,children:(0,i.jsxs)("div",{className:"preview-content",onClick:e=>e.stopPropagation(),children:[x.url&&(x.url.endsWith(".mp4")||x.url.endsWith(".mov")||x.url.endsWith(".avi"))?(0,i.jsx)("video",{src:x.url,controls:!0}):(0,i.jsx)("img",{src:x.url,alt:"Preview"}),(0,i.jsx)("button",{className:"close-button",onClick:b,children:"Close"})]})})]})}}}]);
//# sourceMappingURL=242.c38b4994.chunk.js.map