{"version":3,"file":"static/js/609.1bcbb7a2.chunk.js","mappings":"4LAOA,MAkHA,EAlHoBA,IAAwB,IAAvB,KAAEC,EAAI,QAAEC,GAASF,EACpC,MAAOG,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,KACtCC,EAASC,IAAcF,EAAAA,EAAAA,UAAS,IAEjCG,GAAWC,EAAAA,EAAAA,MAEXC,GAAeC,EAAAA,EAAAA,cAAYC,UAC/B,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,+BAAgC,CAC/DC,OAAQ,CAAEC,MAAOd,KAEnBI,EAAWM,EAASK,KACtB,CAAE,MAAOC,GACPC,QAAQD,MAAM,uBAAwBA,GACtCZ,EAAW,GACb,IACC,CAACJ,KAEJkB,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAaC,IACK,KAAlBA,EAAMC,SAAgBtB,GAAS,EAGrC,OADAuB,OAAOC,iBAAiB,UAAWJ,GAC5B,IAAMG,OAAOE,oBAAoB,UAAWL,EAAU,GAC5D,CAACrB,EAAMC,KAEVmB,EAAAA,EAAAA,YAAU,KACJlB,EAAWyB,OACblB,IAEAH,EAAW,GACb,GACC,CAACJ,EAAYO,IAEhB,MAAMmB,EAAgB,CACpB,wBAAyB,eACzB,qBAAsB,YACtB,sBAAuB,aACvB,sBAAuB,aAiBzB,OAAK5B,GAGH6B,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBF,UAC9BF,EAAAA,EAAAA,MAAA,OAAKI,UAAU,gBAAeF,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,UAAQC,UAAU,wBAAwBC,QAASjC,EAAQ8B,SAAC,OAC5DC,EAAAA,EAAAA,KAAA,SACEG,KAAK,OACLF,UAAU,kCACVG,MAAOlC,EACPmC,SAAWC,GAAMnC,EAAcmC,EAAEC,OAAOH,OACxCI,YAAY,uBAEdX,EAAAA,EAAAA,MAAA,OAAKI,UAAU,wBAAuBF,SAAA,EACpCC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,iBAAgBF,SAAC,cAC/BC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,eAAcF,SACzB1B,EAAQoC,OAAS,EAChBpC,EAAQqC,KAAI,CAACC,EAAQC,KACnBZ,EAAAA,EAAAA,KAAA,MAEEC,UAAU,gCACVC,QAASA,IApCDW,EAACC,EAAaC,KACtC,MAAMC,EAAYpB,EAAckB,GAC5BE,GACFzC,EAAS,GAAGyC,QAAgBD,KAC5B9C,KAEAgD,EAAAA,GAAM/B,MAAM,wBAAwB4B,IAAe,CACjDI,SAAU,aACVC,UAAW,IACXC,MAAO,QAEX,EAyB+BP,CAAkBF,EAAOU,aAAcV,EAAOI,IAC7DO,MAAO,CAAEC,OAAQ,WAAYxB,UAE7BF,EAAAA,EAAAA,MAAA,OAAKI,UAAU,gCAA+BF,SAAA,EAC5CF,EAAAA,EAAAA,MAAA,OAAKI,UAAU,kCAAiCF,SAAA,CAC7CY,EAAOU,aAAa,KAAGV,EAAOI,MAEhCS,OAAOC,QAAQd,GAAQD,KAAI,CAAAgB,EAAeC,KAAC,IAAdC,EAAKxB,GAAMsB,EAAA,MAC/B,iBAARE,GAAkC,OAARA,IACxB/B,EAAAA,EAAAA,MAAA,OAAaI,UAAU,gCAA+BF,SAAA,EACpDF,EAAAA,EAAAA,MAAA,UAAAE,SAAA,CAAS6B,EAAI,OAAU,IAAmB,kBAAVxB,GAAsBA,EAAMyB,WAAW,SACrE7B,EAAAA,EAAAA,KAAA,OACE8B,IAAK1B,EACL2B,IAAKH,EACLN,MAAO,CAAEU,SAAU,QAASC,aAAc,MAAOC,UAAW,UAG9DlC,EAAAA,EAAAA,KAAA,QAAAD,SAAOoC,OAAO/B,OARRuB,EAWX,QAtBAf,MA4BTZ,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBF,SAAC,iCAM5CC,EAAAA,EAAAA,KAACoC,EAAAA,GAAc,OAtDD,IAuDb,C","sources":["components/Search/PopupSearch.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './PopupSearch.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst PopupSearch = ({ show, onClose }) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [results, setResults] = useState([]);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleSearch = useCallback(async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3001/search', {\r\n        params: { query: searchTerm },\r\n      });\r\n      setResults(response.data);\r\n    } catch (error) {\r\n      console.error('Error during search:', error);\r\n      setResults([]);\r\n    }\r\n  }, [searchTerm]);\r\n\r\n  useEffect(() => {\r\n    const handleEsc = (event) => {\r\n      if (event.keyCode === 27) onClose();\r\n    };\r\n    window.addEventListener('keydown', handleEsc);\r\n    return () => window.removeEventListener('keydown', handleEsc);\r\n  }, [show, onClose]);\r\n\r\n  useEffect(() => {\r\n    if (searchTerm.trim()) {\r\n      handleSearch();\r\n    } else {\r\n      setResults([]);\r\n    }\r\n  }, [searchTerm, handleSearch]);\r\n\r\n  const tableRouteMap = {\r\n    'nnrpvtltd.studentinfo': '/studentinfo',\r\n    'nnrpvtltd.employee': '/employee',\r\n    'nnrpvtltd.portfolio': '/portfolio',\r\n    'nnrpvtltd.employees': '/employee',\r\n  };\r\n\r\n  const handleResultClick = (sourceTable, id) => {\r\n    const baseRoute = tableRouteMap[sourceTable];\r\n    if (baseRoute) {\r\n      navigate(`${baseRoute}?id=${id}`);\r\n      onClose();\r\n    } else {\r\n      toast.error(`No route mapped for: ${sourceTable}`, {\r\n        position: 'top-center',\r\n        autoClose: 3000,\r\n        theme: 'dark',\r\n      });\r\n    }\r\n  };\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"popup-container\">\r\n        <div className=\"popup-content\">\r\n          <button className=\"close-btn popup-close\" onClick={onClose}>X</button>\r\n          <input\r\n            type=\"text\"\r\n            className=\"search-input popup-search-input\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            placeholder=\"Type to search...\"\r\n          />\r\n          <div className=\"results popup-results\">\r\n            <h3 className=\"results-header\">Results:</h3>\r\n            <ul className=\"results-list\">\r\n              {results.length > 0 ? (\r\n                results.map((result, index) => (\r\n                  <li\r\n                    key={index}\r\n                    className=\"result-item popup-result-item\"\r\n                    onClick={() => handleResultClick(result.source_table, result.id)}\r\n                    style={{ cursor: 'pointer' }}\r\n                  >\r\n                    <div className=\"result-info popup-result-info\">\r\n                      <div className=\"result-title popup-result-title\">\r\n                        {result.source_table}: {result.id}\r\n                      </div>\r\n                      {Object.entries(result).map(([key, value], i) => (\r\n                        key !== 'source_table' && key !== 'id' && (\r\n                          <div key={i} className=\"result-meta popup-result-meta\">\r\n                            <strong>{key}:</strong> {typeof value === 'string' && value.startsWith('http') ? (\r\n                              <img\r\n                                src={value}\r\n                                alt={key}\r\n                                style={{ maxWidth: '100px', borderRadius: '6px', marginTop: '6px' }}\r\n                              />\r\n                            ) : (\r\n                              <span>{String(value)}</span>\r\n                            )}\r\n                          </div>\r\n                        )\r\n                      ))}\r\n                    </div>\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <p className=\"no-results-message\">No results found.</p>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PopupSearch;\r\n"],"names":["_ref","show","onClose","searchTerm","setSearchTerm","useState","results","setResults","navigate","useNavigate","handleSearch","useCallback","async","response","axios","get","params","query","data","error","console","useEffect","handleEsc","event","keyCode","window","addEventListener","removeEventListener","trim","tableRouteMap","_jsxs","_Fragment","children","_jsx","className","onClick","type","value","onChange","e","target","placeholder","length","map","result","index","handleResultClick","sourceTable","id","baseRoute","toast","position","autoClose","theme","source_table","style","cursor","Object","entries","_ref2","i","key","startsWith","src","alt","maxWidth","borderRadius","marginTop","String","ToastContainer"],"sourceRoot":""}