"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[640],{6640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(5043),n=a(6213),o=a(7762),s=a(1238),r=(a(4857),a(2963)),i=a.n(r),d=a(579);i().setAppElement("#root");const c=()=>{const[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(""),[c,p]=(0,l.useState)({first_name:"",last_name:"",email:"",phone_number:"",hire_date:"",job_title:"",department:""}),[m,h]=(0,l.useState)(null),[u,y]=(0,l.useState)(null),[x,b]=(0,l.useState)(!1),[_,v]=(0,l.useState)({hire_date:"",job_title:"",department:""}),[j,f]=(0,l.useState)(!1);(0,l.useEffect)((()=>{g()}),[]);const g=async()=>{try{f(!0);const e=await n.A.get("http://localhost:3001/employees");t(e.data)}catch(e){console.error("Error fetching employees:",e),alert("Error fetching employees")}finally{f(!1)}},E=()=>{p({first_name:"",last_name:"",email:"",phone_number:"",hire_date:"",job_title:"",department:""}),y(null),h(null)},C=e=>{v({..._,[e.target.name]:e.target.value})},N=(e,t)=>{e.setFont("helvetica","bold"),e.text("Employee Name:",10,40),e.setFont("helvetica","normal"),e.text(`${t.first_name} ${t.last_name}`,50,40),e.setFont("helvetica","bold"),e.text("Employee ID:",10,50),e.setFont("helvetica","normal"),e.text(`${t.id}`,50,50),e.setFont("helvetica","bold"),e.text("Pay Period:",10,60),e.setFont("helvetica","normal"),e.text("01/01/2025 - 31/01/2025",50,60),e.setFont("helvetica","bold"),e.text("Pay Date:",10,70),e.setFont("helvetica","normal"),e.text("05/02/2025",50,70),e.setFont("helvetica","bold"),e.text("Earnings",10,90);const a=[["Description","Hours Worked","Rate","Amount"],["Regular Pay","160","\u20b9500","\u20b980,000"],["Overtime Pay","10","\u20b9750","\u20b97,500"],["Bonus","-","-","\u20b95,000"]];e.autoTable({head:[a[0]],body:a.slice(1),startY:95,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[0,128,128]}});const l=e.lastAutoTable.finalY+10;e.setFont("helvetica","bold"),e.text("Total Earnings: \u20b992,500",10,l);const n=l+10;e.setFont("helvetica","bold"),e.text("Deductions",10,n);const o=[["Description","Amount"],["Federal Tax","\u20b910,000"],["State Tax","\u20b92,500"],["Social Security","\u20b95,000"],["Medicare","\u20b91,500"],["Health Insurance","\u20b92,000"],["Retirement Contribution","\u20b93,000"]];e.autoTable({head:[o[0]],body:o.slice(1),startY:n+5,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[0,128,128]}});const s=e.lastAutoTable.finalY+10;e.setFont("helvetica","bold"),e.text("Total Deductions: \u20b924,000",10,s);const r=s+10;e.text("Net Pay (Take Home): \u20b968,500",10,r);const i=r+20;e.setFont("helvetica","normal"),e.setFontSize(10),e.text("This is a system-generated payslip. For any discrepancies, contact HR.",10,i),e.save(`Payslip_${t.first_name}_${t.last_name}.pdf`)},w=e.filter((e=>{var t,l,n;return((null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase())||"").includes(a.toLowerCase())||((null===(l=e.last_name)||void 0===l?void 0:l.toLowerCase())||"").includes(a.toLowerCase())||((null===(n=e.email)||void 0===n?void 0:n.toLowerCase())||"").includes(a.toLowerCase())})).filter((e=>(!_.job_title||e.job_title===_.job_title)&&(!_.department||e.department===_.department)));return(0,d.jsxs)("div",{className:"App",children:[(0,d.jsx)("div",{className:"emp",children:(0,d.jsx)("p",{children:"Employee Info Management"})}),(0,d.jsx)("div",{className:"search-container",children:(0,d.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:a,onChange:e=>r(e.target.value)})}),(0,d.jsxs)("div",{className:"filters",children:[(0,d.jsx)("input",{type:"date",name:"hire_date",value:_.hire_date,onChange:C,placeholder:"Filter by hire date"}),(0,d.jsx)("input",{type:"text",name:"job_title",value:_.job_title,onChange:C,placeholder:"Filter by role"}),(0,d.jsx)("input",{type:"text",name:"department",value:_.department,onChange:C,placeholder:"Filter by department"})]}),(0,d.jsx)("button",{className:"btn primary",onClick:()=>b(!0),children:"Add Employee"}),(0,d.jsx)("button",{className:"btn secondary",onClick:()=>{const t=new o.uE;t.text("Employee Details",10,10);let a=20;e.forEach((e=>{t.text(`Name: ${e.first_name} ${e.last_name}\nEmail: ${e.email}\nPhone: ${e.phone_number}\nJob: ${e.job_title}\nDepartment: ${e.department}`,10,a),a+=40})),t.save("employees.pdf")},children:"Download PDF"}),(0,d.jsx)("button",{className:"btn secondary",onClick:()=>{const t=s.Wp.json_to_sheet(e.map((e=>({Name:`${e.first_name} ${e.last_name}`,Email:e.email,Phone:e.phone_number,"Hire Date":e.hire_date,Job:e.job_title,Department:e.department})))),a=s.Wp.book_new();s.Wp.book_append_sheet(a,t,"Employees"),s._h(a,"employees.xlsx")},children:"Download Excel"}),(0,d.jsxs)(i(),{isOpen:x,onRequestClose:()=>b(!1),contentLabel:"Add/Edit Employee",className:"Modal",overlayClassName:"Overlay",children:[(0,d.jsx)("h2",{children:m?"Edit Employee":"Add New Employee"}),(0,d.jsxs)("div",{className:"employee-form",children:[(0,d.jsx)("input",{type:"text",placeholder:"First Name",value:c.first_name,onChange:e=>p({...c,first_name:e.target.value})}),(0,d.jsx)("input",{type:"text",placeholder:"Last Name",value:c.last_name,onChange:e=>p({...c,last_name:e.target.value})}),(0,d.jsx)("input",{type:"email",placeholder:"Email",value:c.email,onChange:e=>p({...c,email:e.target.value})}),(0,d.jsx)("input",{type:"text",placeholder:"Phone Number",value:c.phone_number,onChange:e=>p({...c,phone_number:e.target.value})}),(0,d.jsx)("input",{type:"date",placeholder:"Hire Date",value:c.hire_date,onChange:e=>p({...c,hire_date:e.target.value})}),(0,d.jsx)("input",{type:"text",placeholder:"Job Title",value:c.job_title,onChange:e=>p({...c,job_title:e.target.value})}),(0,d.jsx)("input",{type:"text",placeholder:"Department",value:c.department,onChange:e=>p({...c,department:e.target.value})}),(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{y(e.target.files[0])}}),(0,d.jsx)("button",{className:"btn primary",onClick:async()=>{if(c.first_name&&c.last_name&&c.email&&c.hire_date&&c.job_title&&c.department||(alert("Please fill in all required fields."),0))try{const e=new FormData;for(const t in c)"hire_date"===t&&c[t]?e.append(t,c[t].split("T")[0]):e.append(t,c[t]);u&&e.append("profile_pic",u),m?(await n.A.put(`http://localhost:3001/employees/${m.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Employee updated successfully")):(await n.A.post("http://localhost:3001/employees",e,{headers:{"Content-Type":"multipart/form-data"}}),alert("Employee added successfully")),g(),E(),b(!1)}catch(a){var e,t;console.error("Error adding/editing employee:",a),alert(`Error: ${(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Error processing request"}`)}},children:m?"Save Changes":"Add Employee"}),(0,d.jsx)("button",{className:"btn secondary",onClick:()=>b(!1),children:"Cancel"})]})]}),j?(0,d.jsx)("p",{children:"Loading..."}):(0,d.jsx)("div",{className:"employee-list",children:w.map((e=>(0,d.jsxs)("div",{className:"employee-card",children:[e.profile_pic?(0,d.jsx)("img",{src:`http://localhost:3001${e.profile_pic}`,alt:"Profile",className:"profile-pic"}):(0,d.jsx)("div",{className:"default-profile",children:"No Image"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Name:"})," ",e.first_name," ",e.last_name]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Phone:"})," ",e.phone_number]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Hire Date:"})," ",e.hire_date]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Job:"})," ",e.job_title]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Department:"})," ",e.department]}),(0,d.jsxs)("div",{className:"button-group",children:[(0,d.jsx)("button",{className:"btn secondary",onClick:()=>{p(e),h(e),b(!0)},children:"Edit"}),(0,d.jsx)("button",{className:"btn danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this employee?"))try{await n.A.delete(`http://localhost:3001/employees/${e}`),alert("Employee deleted successfully"),g()}catch(t){console.error("Error deleting employee:",t),alert("Error deleting employee")}})(e.id),children:"Delete"}),(0,d.jsx)("button",{className:"btn secondary",onClick:()=>(async e=>{const t=new o.uE;t.setFont("helvetica","bold"),t.setFontSize(18),t.text("Pay Stub",10,20),t.setFontSize(12),t.setFont("helvetica","normal"),t.text("NNR Pvt Ltd",150,20,{align:"right"});try{const a=`http://localhost:3000${e.profile_pic}`,l=await fetch(a);if(!l.ok)throw new Error("Profile picture not found");const n=await l.blob(),o=new FileReader;o.onload=()=>{const a=o.result;t.addImage(a,"JPEG",150,30,40,40),N(t,e)},o.readAsDataURL(n)}catch(a){console.error("Error loading profile picture:",a),console.error("Error adding profile picture:",a),N(t,e)}})(e),children:"Payslip"})]})]},e.id)))})]})}}}]);
//# sourceMappingURL=640.fc208573.chunk.js.map