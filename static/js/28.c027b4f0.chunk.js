"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[28],{1028:(e,s,i)=>{i.r(s),i.d(s,{default:()=>c});var n=i(5043),l=i(6213),t=i(2115),d=i(3910),a=i(7929),r=(i(2342),i(579));const o={name:"",sevisId:"",dob:"",phoneNumber:"",email:"",address:"",country:"",visaType:"",visaStatus:"",universityName:"",universityAddress:"",job:"",experience:"",companyName:""},c=()=>{const[e,s]=(0,n.useState)([]),[i,c]=(0,n.useState)(o),[u,h]=(0,n.useState)(null),[p,x]=(0,n.useState)([]),[j,v]=(0,n.useState)(""),[m,g]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null),[N,f]=(0,n.useState)(null),C="http://localhost:3001",S=(0,n.useCallback)((async()=>{try{const e=await l.A.get(`${C}/studentinfo`);s(e.data)}catch(e){console.error("Failed to fetch student data:",e),t.oR.error("Failed to fetch student data.")}}),[C]),A=(0,n.useCallback)((()=>{g(!1),b(null),c(o),h(null),x([])}),[]),w=(0,n.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b(e),c({name:(null===e||void 0===e?void 0:e.name)||"",sevisId:(null===e||void 0===e?void 0:e.sevisId)||"",dob:null!==e&&void 0!==e&&e.dob?new Date(e.dob).toISOString().split("T")[0]:"",phoneNumber:(null===e||void 0===e?void 0:e.phoneNumber)||"",email:(null===e||void 0===e?void 0:e.email)||"",address:(null===e||void 0===e?void 0:e.address)||"",country:(null===e||void 0===e?void 0:e.country)||"",visaType:(null===e||void 0===e?void 0:e.visaType)||"",visaStatus:(null===e||void 0===e?void 0:e.visaStatus)||"",universityName:(null===e||void 0===e?void 0:e.universityName)||"",universityAddress:(null===e||void 0===e?void 0:e.universityAddress)||"",job:(null===e||void 0===e?void 0:e.job)||"",experience:(null===e||void 0===e?void 0:e.experience)||"",companyName:(null===e||void 0===e?void 0:e.companyName)||""}),h(null),x([]),g(!0),f(null)}),[]),D=(0,n.useCallback)((async()=>{const e=new FormData;for(const l in o)e.append(l,i[l]||"");if(u&&e.append("profilePic",u),p)for(let i=0;i<p.length;i++)e.append("supportingDocs",p[i]);try{y?(await l.A.put(`${C}/studentinfo/${y.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),t.oR.success("Student data updated successfully!")):(await l.A.post(`${C}/studentinfo`,e,{headers:{"Content-Type":"multipart/form-data"}}),t.oR.success("Student data saved successfully!")),S(),A()}catch(d){var s,n;console.error("Failed to save student data:",d);const e=(null===(s=d.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to save student data.";t.oR.error(e)}}),[C,y,i,u,p,S,A]),E=(0,n.useCallback)((async e=>{if(window.confirm("Are you sure you want to delete this student?"))try{await l.A.delete(`${C}/studentinfo/${e}`),t.oR.success("Student data deleted successfully!"),S(),(null===N||void 0===N?void 0:N.id)===e&&f(null)}catch(s){console.error("Failed to delete student data:",s),t.oR.error("Failed to delete student data.")}}),[C,S,null===N||void 0===N?void 0:N.id]);(0,n.useEffect)((()=>{S()}),[S]);const I=e=>{const{name:s,value:i}=e.target;c((e=>({...e,[s]:i})))},k=e=>{"profilePic"===e.target.name?h(e.target.files[0]):x(Array.from(e.target.files))},P=e.filter((e=>Object.values(e).some((e=>null===e||void 0===e?void 0:e.toString().toLowerCase().includes(j)))));return(0,r.jsxs)("div",{className:"student-info",children:[(0,r.jsx)(t.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,r.jsx)("div",{className:"stu",children:(0,r.jsx)("p",{children:"Student Info Management"})}),(0,r.jsx)("button",{className:"add-student-btn",onClick:()=>w(),children:"Add New Student"}),(0,r.jsx)("input",{type:"text",placeholder:"Search all columns...",value:j,onChange:e=>{v(e.target.value.toLowerCase())},className:"search-input"}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Profile Picture"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"SEVIS ID"}),(0,r.jsx)("th",{children:"Phone Number"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{children:"Address"}),(0,r.jsx)("th",{children:"Country"}),(0,r.jsx)("th",{children:"Visa Type"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:P.map((e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.profilePic?(0,r.jsx)("img",{src:`${C}/${e.profilePic}`,alt:`${e.name}'s profile`,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"50%"}}):(0,r.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"#eee",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:"No Pic"})}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.sevisId}),(0,r.jsx)("td",{children:e.phoneNumber}),(0,r.jsx)("td",{children:e.email}),(0,r.jsx)("td",{children:e.address}),(0,r.jsx)("td",{children:e.country}),(0,r.jsx)("td",{children:e.visaType}),(0,r.jsxs)("td",{children:[(0,r.jsx)(d.g,{icon:a.MT7,className:"action-icon edit-icon",onClick:()=>w(e),title:"Edit"}),(0,r.jsx)(d.g,{icon:a.yLS,className:"action-icon delete-icon",onClick:()=>E(e.id),title:"Delete"}),(0,r.jsx)("button",{className:"view-btn action-button",onClick:()=>(e=>{f(e),g(!1)})(e),title:"View",children:"View"})]})]},e.id)))})]}),N&&(0,r.jsxs)("div",{className:"modal-overlay",onClick:()=>f(null),children:[" ",(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[" ",(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h2",{children:"Student Details"}),(0,r.jsx)("button",{className:"close-modal",onClick:()=>f(null),title:"Close",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"modal-body view-details",children:[" ",N.profilePic&&(0,r.jsx)("img",{src:`${C}/${N.profilePic}`,alt:`${N.name}'s profile`,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"50%",marginBottom:"15px",display:"block",marginLeft:"auto",marginRight:"auto"}}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",N.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"SEVIS ID:"})," ",N.sevisId]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"DOB:"})," ",N.dob?new Date(N.dob).toLocaleDateString():"N/A"]})," ",(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Phone Number:"})," ",N.phoneNumber]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",N.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Address:"})," ",N.address]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Country:"})," ",N.country]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Visa Type:"})," ",N.visaType]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Visa Status:"})," ",N.visaStatus]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"University Name:"})," ",N.universityName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"University Address:"})," ",N.universityAddress]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Job:"})," ",N.job]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Experience:"})," ",N.experience]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Company Name:"})," ",N.companyName]}),N.supportingDocs&&N.supportingDocs.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Supporting Documents:"}),(0,r.jsx)("ul",{children:N.supportingDocs.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:`${C}/${e}`,target:"_blank",rel:"noopener noreferrer",children:e.split("/").pop()})},s)))})]})]})]})]}),m&&(0,r.jsxs)("div",{className:"modal-overlay",onClick:A,children:[" ",(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[" ",(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h2",{children:y?"Edit Student":"Add New Student"}),(0,r.jsx)("button",{className:"close-modal",onClick:A,title:"Close",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"modal-body form-fields",children:[" ",(0,r.jsxs)("div",{className:"form-grid",children:[" ",(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"NAME:"}),(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:i.name||"",onChange:I,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"SEVIS ID:"}),(0,r.jsx)("input",{type:"text",name:"sevisId",placeholder:"SEVIS ID",value:i.sevisId||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"DATE OF BIRTH:"}),(0,r.jsx)("input",{type:"date",name:"dob",value:i.dob||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"PHONE NO:"}),(0,r.jsx)("input",{type:"tel",name:"phoneNumber",placeholder:"Phone Number",value:i.phoneNumber||"",onChange:I})]})," ",(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"EMAIL:"}),(0,r.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:i.email||"",onChange:I,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"ADDRESS:"}),(0,r.jsx)("input",{type:"text",name:"address",placeholder:"Address",value:i.address||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"COUNTRY:"}),(0,r.jsx)("input",{type:"text",name:"country",placeholder:"Country",value:i.country||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"VISA TYPE:"}),(0,r.jsx)("input",{type:"text",name:"visaType",placeholder:"Visa Type (e.g., F1, H1B)",value:i.visaType||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"VISA STATUS:"}),(0,r.jsx)("input",{type:"text",name:"visaStatus",placeholder:"Visa Status (e.g., Approved, Pending)",value:i.visaStatus||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"UNIVERSITY NAME:"}),(0,r.jsx)("input",{type:"text",name:"universityName",placeholder:"University Name",value:i.universityName||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"UNIVERSITY ADDRESS:"}),(0,r.jsx)("input",{type:"text",name:"universityAddress",placeholder:"University Address",value:i.universityAddress||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"JOB:"}),(0,r.jsx)("input",{type:"text",name:"job",placeholder:"Job Title",value:i.job||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"EXPERIENCE:"}),(0,r.jsx)("input",{type:"text",name:"experience",placeholder:"Years of Experience",value:i.experience||"",onChange:I})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"COMPANY NAME:"}),(0,r.jsx)("input",{type:"text",name:"companyName",placeholder:"Company Name",value:i.companyName||"",onChange:I})]})]}),(0,r.jsxs)("div",{className:"file-input-section",children:[(0,r.jsx)("label",{children:"Profile Picture:"}),(0,r.jsx)("input",{type:"file",name:"profilePic",accept:"image/*",onChange:k})," ",(null===y||void 0===y?void 0:y.profilePic)&&!u&&(0,r.jsx)("img",{src:`${C}/${y.profilePic}`,alt:"Current profile",style:{width:"60px",height:"60px",objectFit:"cover",marginLeft:"10px",verticalAlign:"middle"}}),u&&(0,r.jsx)("img",{src:URL.createObjectURL(u),alt:"New profile preview",style:{width:"60px",height:"60px",objectFit:"cover",marginLeft:"10px",verticalAlign:"middle"}})]}),(0,r.jsxs)("div",{className:"file-input-section",children:[(0,r.jsx)("label",{children:"Supporting Documents:"}),(0,r.jsx)("input",{type:"file",name:"supportingDocs",multiple:!0,onChange:k}),(null===y||void 0===y?void 0:y.supportingDocs)&&y.supportingDocs.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Current Documents:"}),(0,r.jsx)("ul",{children:y.supportingDocs.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:`${C}/${e}`,target:"_blank",rel:"noopener noreferrer",children:e.split("/").pop()})},s)))})]}),p.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"New Documents to Upload:"}),(0,r.jsx)("ul",{children:p.map(((e,s)=>(0,r.jsx)("li",{children:e.name},s)))})]})]}),(0,r.jsx)("button",{className:"save-button",onClick:D,children:y?"Update Student":"Save Student"})]})]})]})]})}}}]);
//# sourceMappingURL=28.c027b4f0.chunk.js.map